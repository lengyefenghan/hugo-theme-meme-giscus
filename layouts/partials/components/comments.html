{{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment "production") }}
    {{ if or (in .Site.Params.mainSections .Section) .Params.comments }}

        {{ if not .Site.Params.autoLoadComments }}
            <div class="load-comments">
                <div id="load-comments">{{ i18n "loadComments" }}</div>
            </div>
        {{  end }}

        {{ if .Site.Params.enableDisqus }}
            <div id="disqus_thread"></div>
        {{ end }}

        {{ if .Site.Params.enableValine }}
            <div id="vcomments"></div>
        {{ end }}

        {{ if .Site.Params.enableUtterances }}
            <div id="utterances"></div>
        {{ end }}

        {{ if .Site.Params.enableGitalk }}
            <div id="gitalk-container"></div>
        {{ end }}
        {{ if .Site.Params.enableGiscus }}
            <div id="giscus">
                <script src="https://giscus.app/client.js"
                    data-repo="lengyefenghan/blog"
                    data-repo-id="R_kgDOHJIjrA"
                    data-category="Comments"
                    data-category-id="DIC_kwDOHJIjrM4CSMzr"
                    data-mapping="pathname"
                    data-strict="0"
                    data-reactions-enabled="1"
                    data-emit-metadata="1"
                    data-input-position="top"
                    data-theme="light"
                    data-lang="zh-CN"
                    crossorigin="anonymous"
                    async>
                </script>
            </div>
        {{ end }}
    {{ end }}
{{ end }}
